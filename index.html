<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VakalatOS | Legal Intelligence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // SECURITY GATE
        const AUTH_CODE = localStorage.getItem('vakalat_token');

        // If not logged in, ask for password
        if (!AUTH_CODE) {
            const code = prompt("ðŸ”’ VAKALAT PRO ENTERPRISE\n\nEnter Security Access Code:");
            if (code) {
                localStorage.setItem('vakalat_token', code);
                location.reload();
            } else {
                document.body.innerHTML = "<div style='display:flex;height:100vh;align-items:center;justify-center;background:#000;color:red;font-family:sans-serif'><h1>â›” ACCESS DENIED</h1></div>";
                throw new Error("Access Denied");
            }
        }

        // GLOBAL API HEADER INJECTOR
        // This intercepts all fetches and adds the password header
        const originalFetch = window.fetch;
        window.fetch = function () {
            let [resource, config] = arguments;
            if (!config) config = {};
            if (!config.headers) config.headers = {};
            config.headers['x-access-token'] = localStorage.getItem('vakalat_token');
            return originalFetch(resource, config);
        };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], display: ['Space Grotesk', 'sans-serif'] },
                    boxShadow: {
                        'os-window': '0 25px 50px -12px rgba(0, 0, 0, 0.15), 0 0 1px rgba(0,0,0,0.1)',
                        'os-dock': '0 10px 30px -5px rgba(0, 0, 0, 0.1), 0 0 1px rgba(0,0,0,0.1)',
                        'card': '0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03)'
                    },
                    animation: { 'enter': 'enter 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards' },
                    keyframes: {
                        enter: { '0%': { opacity: '0', transform: 'scale(0.95) translateY(10px)' }, '100%': { opacity: '1', transform: 'scale(1) translateY(0)' } }
                    },
                    colors: { gold: { 400: '#FACC15', 500: '#EAB308', 600: '#CA8A04' } }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #e8e8e8;
            background-image: radial-gradient(at 0% 0%, rgba(255, 255, 255, 0.8) 0px, transparent 50%), radial-gradient(at 100% 100%, rgba(200, 200, 200, 0.5) 0px, transparent 50%);
            background-attachment: fixed;
        }

        ::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }

        .dock-item-active {
            background-color: #000;
            color: #fff;
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .dock-item-inactive {
            color: #666;
            background: transparent;
        }

        .dock-item-inactive:hover {
            color: #000;
            background-color: rgba(0, 0, 0, 0.05);
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .prose-legal p {
            margin-bottom: 1em;
        }

        .prose-legal strong {
            font-family: 'Space Grotesk';
            font-weight: 600;
            color: #000;
        }

        .prose-legal h3 {
            font-family: 'Space Grotesk';
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-top: 1.5em;
            color: #888;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }

        .id-card-gradient {
            background: linear-gradient(135deg, #1a1a1a 0%, #000000 100%);
        }
    </style>
</head>

<body
    class="h-screen w-screen overflow-hidden flex items-center justify-center p-4 md:p-8 font-sans selection:bg-black selection:text-white">

    <div class="fixed left-8 top-1/2 -translate-y-1/2 flex flex-col gap-4 z-50">
        <div
            class="w-14 h-14 bg-black rounded-2xl flex items-center justify-center text-white font-display font-bold text-xl shadow-os-dock mb-4 hover:scale-110 transition-transform cursor-pointer">
            V</div>
        <div class="glass-panel rounded-3xl p-2 flex flex-col gap-2 shadow-os-dock">
            <button onclick="setView('research')" id="btn-research"
                class="w-10 h-10 rounded-2xl flex items-center justify-center transition-all duration-300 dock-item-active group relative"><svg
                    class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg></button>
            <button onclick="setView('draft')" id="btn-draft"
                class="w-10 h-10 rounded-2xl flex items-center justify-center transition-all duration-300 dock-item-inactive group relative"><svg
                    class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                </svg></button>
            <button onclick="setView('review')" id="btn-review"
                class="w-10 h-10 rounded-2xl flex items-center justify-center transition-all duration-300 dock-item-inactive group relative"><svg
                    class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
                </svg></button>
            <div class="h-px w-6 bg-gray-200 mx-auto my-1"></div>
            <button onclick="setView('profile')" id="btn-profile"
                class="w-10 h-10 rounded-2xl flex items-center justify-center transition-all duration-300 dock-item-inactive group relative overflow-hidden">
                <img src="https://ui-avatars.com/api/?name=Mukul+Sharma&background=000&color=fff"
                    class="w-10 h-10 object-cover">
            </button>
        </div>
    </div>

    <main
        class="w-full max-w-[1400px] h-[95vh] bg-white rounded-[2.5rem] shadow-os-window relative overflow-hidden flex flex-col md:ml-24 animate-enter border border-white/50 ring-1 ring-black/5">

        <div class="h-16 flex items-center justify-between px-8 bg-white/80 backdrop-blur-sm z-30 sticky top-0">
            <div class="flex items-center gap-3">
                <span class="font-display font-bold text-lg tracking-tight">Vakalat<span
                        class="font-normal text-gray-400">OS</span></span>
                <span id="module-badge"
                    class="px-2 py-0.5 rounded-full bg-gray-100 text-[10px] font-bold text-gray-500 uppercase tracking-widest border border-gray-200">Research</span>
            </div>
            <div class="flex items-center gap-4 text-xs font-medium text-gray-400">
                <span class="flex items-center gap-1.5"><span
                        class="w-1.5 h-1.5 bg-green-500 rounded-full"></span>Online</span>
            </div>
        </div>

        <div id="view-research" class="view-section flex-1 flex flex-col relative h-full overflow-hidden">
            <div id="chat-container" class="flex-1 overflow-y-auto px-6 md:px-32 py-10 space-y-12 pb-32">
                <div id="empty-state" class="mt-20">
                    <h1
                        class="font-display text-5xl md:text-6xl font-medium text-black mb-6 tracking-tight leading-[1.1]">
                        Legal Intelligence,<br><span class="text-gray-300">Simplified.</span></h1>
                    <p class="text-gray-500 text-lg max-w-xl leading-relaxed mb-10">Ask complex legal queries across
                        verified High Court & Supreme Court precedents.</p>
                </div>
            </div>
            <div class="absolute bottom-10 left-0 w-full px-6 md:px-32 z-40">
                <div
                    class="bg-white/80 backdrop-blur-xl border border-white/20 shadow-2xl rounded-2xl p-2 flex items-center ring-1 ring-black/5 transition-shadow focus-within:ring-black/20 focus-within:shadow-os-window">
                    <input type="text" id="query-input" placeholder="Ask Vakalat..."
                        class="w-full bg-transparent px-6 py-4 text-lg font-medium text-black placeholder-gray-400 focus:outline-none font-sans"
                        onkeypress="if(event.key === 'Enter') runQuery()">
                    <button onclick="runQuery()"
                        class="p-4 bg-black text-white rounded-xl hover:scale-95 transition-transform"><svg
                            class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M14 5l7 7m0 0l-7 7m7-7H3" />
                        </svg></button>
                </div>
            </div>
        </div>

        <div id="view-draft" class="view-section hidden flex-1 flex h-full">
            <div class="w-[400px] bg-gray-50 p-10 flex flex-col gap-8 border-r border-gray-100 h-full overflow-y-auto">
                <div>
                    <h2 class="font-display text-2xl font-bold mb-2">Drafting Engine</h2>
                    <p class="text-sm text-gray-500">Configure parameters.</p>
                </div>
                <div class="space-y-6">
                    <div class="group"><label
                            class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">Type</label><select
                            id="doc-type"
                            class="w-full p-4 bg-white rounded-xl border-none shadow-sm text-base font-medium outline-none">
                            <option>Legal Notice</option>
                            <option>Writ Petition</option>
                        </select></div>
                    <div class="group flex-1"><label
                            class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">Facts</label><textarea
                            id="facts"
                            class="w-full p-4 bg-white rounded-xl border-none shadow-sm h-64 resize-none text-base leading-relaxed outline-none"
                            placeholder="Enter facts..."></textarea></div>
                    <button onclick="runDraft()"
                        class="w-full py-5 bg-black text-white font-display font-medium text-lg rounded-xl shadow-lg hover:shadow-xl hover:translate-y-[-2px] transition-all">Generate
                        Draft</button>
                </div>
            </div>
            <div
                class="flex-1 bg-white p-12 overflow-y-auto relative bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px]">
                <div class="max-w-3xl mx-auto bg-white min-h-[800px] shadow-os-window rounded-sm p-16 relative">
                    <div id="draft-output" class="prose-legal text-lg leading-loose text-gray-800">
                        <div class="flex flex-col items-center justify-center h-96 text-gray-300"><span
                                class="font-display font-medium tracking-widest text-sm">PREVIEW MODE</span></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-review" class="view-section hidden flex-1 flex h-full">
            <div class="w-[400px] bg-gray-50 p-10 flex flex-col gap-8 border-r border-gray-100 h-full overflow-y-auto">
                <div>
                    <h2 class="font-display text-2xl font-bold mb-2">Analyzer</h2>
                    <p class="text-sm text-gray-500">Audit opponent documents.</p>
                </div>
                <div class="space-y-6">
                    <div class="group flex-1"><label
                            class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">Document
                            Text</label><textarea id="review-text"
                            class="w-full p-4 bg-white rounded-xl border-none shadow-sm h-96 resize-none text-sm font-mono leading-relaxed outline-none"
                            placeholder="Paste clause or contract here..."></textarea></div>
                    <button onclick="runReview()"
                        class="w-full py-5 bg-amber-700 text-white font-display font-medium text-lg rounded-xl shadow-lg hover:shadow-xl hover:translate-y-[-2px] transition-all">Audit
                        Document</button>
                </div>
            </div>
            <div
                class="flex-1 bg-white p-12 overflow-y-auto relative bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px]">
                <div class="max-w-3xl mx-auto bg-white min-h-[800px] shadow-os-window rounded-sm p-16 relative">
                    <div id="review-output" class="prose-legal text-lg leading-loose text-gray-800">
                        <div class="flex flex-col items-center justify-center h-96 text-gray-300"><span
                                class="font-display font-medium tracking-widest text-sm">WAITING FOR INPUT</span></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-profile"
            class="view-section hidden flex-1 flex items-center justify-center bg-gray-50 relative overflow-hidden">
            <div
                class="absolute inset-0 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:24px_24px] opacity-50">
            </div>

            <div class="relative w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8 p-8">
                <div class="id-card-gradient rounded-[2rem] p-8 text-white shadow-2xl relative overflow-hidden group">
                    <div
                        class="absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl group-hover:bg-white/10 transition-colors">
                    </div>

                    <div class="relative z-10 flex flex-col h-full justify-between min-h-[400px]">
                        <div class="flex justify-between items-start">
                            <div
                                class="w-12 h-12 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-md border border-white/20">
                                <span class="font-display font-bold text-xl">V</span>
                            </div>
                            <div
                                class="px-3 py-1 bg-gradient-to-r from-gold-400 to-gold-600 rounded-full text-black text-[10px] font-bold uppercase tracking-widest shadow-lg">
                                Premium Partner</div>
                        </div>

                        <div class="space-y-6">
                            <div
                                class="w-24 h-24 rounded-2xl bg-white/10 backdrop-blur-md border border-white/20 overflow-hidden relative">
                                <img src="https://ui-avatars.com/api/?name=Mukul+Sharma&background=random&size=200"
                                    class="w-full h-full object-cover">
                            </div>
                            <div>
                                <h2 class="font-display text-3xl font-bold mb-1">Mukul Sharma</h2>
                                <p id="role-title" class="text-gray-400 text-sm tracking-wide">SENIOR ADVOCATE â€¢ SUPREME
                                    COURT</p>
                            </div>
                            <div class="flex gap-8 border-t border-white/10 pt-6">
                                <div>
                                    <div class="text-2xl font-display font-bold">92k</div>
                                    <div class="text-[10px] text-gray-500 uppercase tracking-wider">Citations</div>
                                </div>
                                <div>
                                    <div class="text-2xl font-display font-bold">4.9</div>
                                    <div class="text-[10px] text-gray-500 uppercase tracking-wider">Reputation</div>
                                </div>
                                <div>
                                    <div class="text-2xl font-display font-bold text-green-400">Active</div>
                                    <div class="text-[10px] text-gray-500 uppercase tracking-wider">License</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex flex-col justify-center gap-6">
                    <h3 class="font-display text-2xl font-bold text-black">Select Workspace Identity</h3>

                    <button onclick="setRole('Advocate')"
                        class="bg-white p-6 rounded-2xl shadow-card hover:shadow-lg transition-all flex items-center gap-4 group border border-transparent hover:border-black/5">
                        <div
                            class="w-12 h-12 bg-gray-50 rounded-xl flex items-center justify-center group-hover:bg-black group-hover:text-white transition-colors">
                            <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3" />
                            </svg>
                        </div>
                        <div class="text-left">
                            <div class="font-bold text-black">Senior Advocate</div>
                            <div class="text-xs text-gray-500">Drafting & Litigation Mode</div>
                        </div>
                    </button>

                    <button onclick="setRole('Judge')"
                        class="bg-white p-6 rounded-2xl shadow-card hover:shadow-lg transition-all flex items-center gap-4 group border border-transparent hover:border-black/5">
                        <div
                            class="w-12 h-12 bg-gray-50 rounded-xl flex items-center justify-center group-hover:bg-black group-hover:text-white transition-colors">
                            <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                            </svg>
                        </div>
                        <div class="text-left">
                            <div class="font-bold text-black">Judicial Officer</div>
                            <div class="text-xs text-gray-500">Neutral Analysis Mode</div>
                        </div>
                    </button>

                    <button onclick="setRole('Associate')"
                        class="bg-white p-6 rounded-2xl shadow-card hover:shadow-lg transition-all flex items-center gap-4 group border border-transparent hover:border-black/5">
                        <div
                            class="w-12 h-12 bg-gray-50 rounded-xl flex items-center justify-center group-hover:bg-black group-hover:text-white transition-colors">
                            <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                        </div>
                        <div class="text-left">
                            <div class="font-bold text-black">Legal Associate</div>
                            <div class="text-xs text-gray-500">Research & Summarization</div>
                        </div>
                    </button>
                </div>
            </div>
        </div>

    </main>

    <script>
        const API_URL = "http://127.0.0.1:8000";

        function setView(v) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('button[id^="btn-"]').forEach(el => el.className = 'w-10 h-10 rounded-2xl flex items-center justify-center transition-all duration-300 dock-item-inactive group relative');

            document.getElementById('view-' + v).classList.remove('hidden');
            const btn = document.getElementById('btn-' + v);

            if (v === 'profile') {
                // Profile button has image, handle differently if needed, or just let CSS handle it
                btn.className = 'w-10 h-10 rounded-2xl flex items-center justify-center transition-all duration-300 dock-item-active group relative overflow-hidden ring-2 ring-black ring-offset-2';
            } else {
                btn.className = 'w-10 h-10 rounded-2xl flex items-center justify-center transition-all duration-300 dock-item-active group relative';
            }

            const titles = { 'research': 'Research Console', 'draft': 'Drafting Engine', 'review': 'Analyzer', 'profile': 'Partner Profile' };
            document.getElementById('module-badge').innerText = titles[v];
        }

        function setRole(role) {
            const titles = {
                'Advocate': 'SENIOR ADVOCATE â€¢ SUPREME COURT',
                'Judge': 'HON\'BLE JUSTICE â€¢ HIGH COURT',
                'Associate': 'SENIOR ASSOCIATE â€¢ LITIGATION'
            };
            document.getElementById('role-title').innerText = titles[role];
        }

        async function runQuery() {
            const input = document.getElementById('query-input');
            const container = document.getElementById('chat-container');
            const empty = document.getElementById('empty-state');
            const q = input.value.trim();
            if (!q) return;

            if (empty) empty.classList.add('hidden');
            input.value = '';

            container.innerHTML += `<div class="flex justify-end animate-enter mb-6"><div class="bg-black text-white px-8 py-5 rounded-[2rem] rounded-tr-sm max-w-2xl text-lg font-medium shadow-lg">${q}</div></div>`;
            container.scrollTop = container.scrollHeight;

            const loadId = 'load-' + Date.now();
            container.innerHTML += `<div id="${loadId}" class="flex gap-6 max-w-4xl animate-enter mb-8"><div class="w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0"><div class="w-4 h-4 border-2 border-gray-300 border-t-black rounded-full animate-spin"></div></div><div><div class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-2">Jurist Analysis</div><div class="h-4 bg-gray-100 rounded w-64 animate-pulse mb-2"></div><div class="h-4 bg-gray-100 rounded w-48 animate-pulse"></div></div></div>`;
            container.scrollTop = container.scrollHeight;

            try {
                const res = await fetch(`${API_URL}/research`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ question: q }) });
                const data = await res.json();
                document.getElementById(loadId).remove();

                const isFail = data.direct_answer === "Information Not Found";
                let authHTML = data.authorities.length ? `<div class="mt-8 pt-6 border-t border-gray-100"><div class="flex flex-wrap gap-2">${data.authorities.map(a => `<span class="px-3 py-1 bg-gray-50 border border-gray-200 rounded-lg text-xs font-bold text-gray-500 uppercase tracking-wide">${a}</span>`).join('')}</div></div>` : '';

                container.innerHTML += `<div class="flex gap-6 max-w-4xl animate-enter mb-10 group"><div class="w-10 h-10 rounded-full bg-black text-white flex items-center justify-center flex-shrink-0 font-display font-bold shadow-lg mt-1">V</div><div class="flex-1"><div class="flex items-center gap-3 mb-4"><span class="px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest ${isFail ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-700'}">${isFail ? 'No Data' : 'Verified'}</span></div><h2 class="font-display text-2xl font-bold text-black mb-4">${data.direct_answer}</h2><div class="prose-legal text-gray-600 text-lg leading-relaxed">${data.analysis}</div>${authHTML}</div></div>`;
            } catch (e) { document.getElementById(loadId).innerHTML = `<div class="ml-16 text-red-500 font-medium">System Offline.</div>`; }
            container.scrollTop = container.scrollHeight;
        }

        async function runDraft() {
            const out = document.getElementById('draft-output');
            out.innerHTML = `<div class="flex flex-col items-center justify-center pt-32 animate-enter"><div class="w-8 h-8 border-2 border-gray-200 border-t-black rounded-full animate-spin mb-4"></div><span class="text-gray-400 text-sm font-medium tracking-widest uppercase">Drafting...</span></div>`;
            const res = await fetch(`${API_URL}/draft`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ doc_type: document.getElementById('doc-type').value, details: document.getElementById('facts').value }) });
            const data = await res.json();
            out.innerHTML = data.draft;
        }

        async function runReview() {
            const out = document.getElementById('review-output');
            out.innerHTML = `<div class="flex flex-col items-center justify-center pt-32 animate-enter"><div class="w-8 h-8 border-2 border-gray-200 border-t-amber-700 rounded-full animate-spin mb-4"></div><span class="text-gray-400 text-sm font-medium tracking-widest uppercase">Auditing...</span></div>`;
            const res = await fetch(`${API_URL}/analyze`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ doc_text: document.getElementById('review-text').value }) });
            const data = await res.json();
            out.innerHTML = data.analysis;
        }
    </script>
</body>

</html>